<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Circle OS Support</title>
<meta name="description" content="Get help with Circle OS ‚Äî installation, features, Titanium Wallet, mesh networking, and more."/>
<meta name="theme-color" content="#0D0D1A"/>
<style>
:root{--bg:#0D0D1A;--surface:#1A1A2E;--border:#252540;--accent:#00D4FF;--purple:#7B2FBE;--green:#00E676;--amber:#FFB300;--text:#fff;--muted:#8892A4;}
*{box-sizing:border-box;margin:0;padding:0;}
body{background:var(--bg);color:var(--text);font-family:Inter,system-ui,sans-serif;min-height:100vh;}
a{color:var(--accent);text-decoration:none;}a:hover{text-decoration:underline;}
.nav{background:var(--surface);border-bottom:1px solid var(--border);padding:16px 32px;display:flex;align-items:center;justify-content:space-between;}
.nav-logo{font-weight:800;font-size:1.1rem;color:var(--accent);}
.hero{text-align:center;padding:64px 24px 48px;max-width:720px;margin:0 auto;}
.hero h1{font-size:2.2rem;font-weight:800;margin-bottom:12px;}
.hero p{color:var(--muted);font-size:1.05rem;margin-bottom:32px;}
.search-box{display:flex;gap:8px;max-width:520px;margin:0 auto;}
.search-box input{flex:1;padding:12px 16px;background:var(--surface);border:1px solid var(--border);border-radius:10px;color:var(--text);font-size:1rem;}
.search-box input:focus{outline:none;border-color:var(--accent);}
.search-box button{padding:12px 24px;background:var(--accent);color:#000;border:none;border-radius:10px;font-weight:700;cursor:pointer;}
.container{max-width:960px;margin:0 auto;padding:40px 24px;}
.categories{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin:48px 0;}
.cat{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:24px;transition:border-color .15s;cursor:pointer;}
.cat:hover{border-color:var(--accent);}
.cat-icon{font-size:2rem;margin-bottom:12px;}
.cat h3{font-size:1rem;font-weight:700;margin-bottom:4px;}
.cat p{font-size:.82rem;color:var(--muted);}
.popular{margin-bottom:48px;}
.popular h2{font-size:1.3rem;font-weight:700;margin-bottom:20px;}
.article{padding:14px 0;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;}
.article:last-child{border-bottom:none;}
.article-title{font-size:.9rem;font-weight:500;}
.article-title:hover{color:var(--accent);}
.article-cat{font-size:.75rem;color:var(--muted);}
.ticket-section{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:32px;margin-top:32px;}
.ticket-section h2{margin-bottom:8px;}
.ticket-section p{color:var(--muted);font-size:.875rem;margin-bottom:24px;}
.form-group{margin-bottom:16px;}
.form-group label{display:block;font-size:.8rem;font-weight:600;color:var(--muted);margin-bottom:6px;text-transform:uppercase;letter-spacing:.05em;}
.form-group input,.form-group select,.form-group textarea{width:100%;padding:10px 14px;background:var(--bg);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:.875rem;}
.form-group input:focus,.form-group select:focus,.form-group textarea:focus{outline:none;border-color:var(--accent);}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:16px;}
.btn-primary{padding:12px 24px;background:var(--accent);color:#000;border:none;border-radius:8px;font-weight:700;cursor:pointer;font-size:.9rem;}
#success{display:none;background:rgba(0,230,118,.1);border:1px solid rgba(0,230,118,.3);color:var(--green);padding:16px;border-radius:8px;margin-top:16px;}
footer{text-align:center;padding:32px 24px;color:var(--muted);font-size:.8rem;border-top:1px solid var(--border);}
</style>
</head>
<body>
<nav class="nav">
    <div class="nav-logo">‚óØ Circle OS Support</div>
    <a href="https://circleos.co.za" style="font-size:.85rem;color:var(--muted);">‚Üê Back to circleos.co.za</a>
</nav>

<div class="hero">
    <h1>How can we help?</h1>
    <p>Find answers, browse guides, or submit a ticket.</p>
    <div class="search-box">
        <input type="text" id="search" placeholder="Search support articles‚Ä¶" oninput="filterArticles(this.value)"/>
        <button onclick="filterArticles(document.getElementById('search').value)">Search</button>
    </div>
</div>

<div class="container">
    <div class="categories">
        <div class="cat" onclick="scrollTo('installation')">
            <div class="cat-icon">üì±</div>
            <h3>Installation</h3>
            <p>Flash guides, bootloader unlock, troubleshooting</p>
        </div>
        <div class="cat" onclick="scrollTo('features')">
            <div class="cat-icon">‚ú¶</div>
            <h3>Features</h3>
            <p>Butler AI, Mesh, Titanium Wallet, Privacy Engine</p>
        </div>
        <div class="cat" onclick="scrollTo('wallet')">
            <div class="cat-icon">‚Ç∑</div>
            <h3>Titanium Wallet</h3>
            <p>Payments, Shongololo, NFC, settlement</p>
        </div>
        <div class="cat" onclick="scrollTo('account')">
            <div class="cat-icon">üë§</div>
            <h3>Account</h3>
            <p>Waitlist, developer portal, SleptOn</p>
        </div>
        <div class="cat" onclick="scrollTo('updates')">
            <div class="cat-icon">‚¨á</div>
            <h3>Updates</h3>
            <p>OTA updates, channels, mesh distribution</p>
        </div>
        <div class="cat" onclick="scrollTo('other')">
            <div class="cat-icon">üí¨</div>
            <h3>Other</h3>
            <p>Community, contributing, bug reports</p>
        </div>
    </div>

    <div class="popular" id="articles">
        <h2>Popular articles</h2>
        <div id="articles-list">
            <div class="article" data-tags="installation samsung flash bootloader">
                <div><a class="article-title" href="https://docs.circleos.co.za/user/installation/samsung-galaxy-a52">How to install Circle OS on Samsung Galaxy A52</a><div class="article-cat">Installation</div></div>
                <span style="color:var(--muted);font-size:.8rem;">‚Üí</span>
            </div>
            <div class="article" data-tags="installation xiaomi redmi unlock">
                <div><a class="article-title" href="https://docs.circleos.co.za/user/installation/xiaomi-redmi-note-10">How to install Circle OS on Xiaomi Redmi Note 10</a><div class="article-cat">Installation</div></div>
                <span style="color:var(--muted);font-size:.8rem;">‚Üí</span>
            </div>
            <div class="article" data-tags="wallet payment nfc titanium shongololo">
                <div><a class="article-title" href="https://docs.circleos.co.za/user/features/titanium">Using Titanium Wallet for NFC payments</a><div class="article-cat">Titanium Wallet</div></div>
                <span style="color:var(--muted);font-size:.8rem;">‚Üí</span>
            </div>
            <div class="article" data-tags="mesh offline messaging bluetooth wifi">
                <div><a class="article-title" href="https://docs.circleos.co.za/user/features/mesh">How the mesh network works</a><div class="article-cat">Features</div></div>
                <span style="color:var(--muted);font-size:.8rem;">‚Üí</span>
            </div>
            <div class="article" data-tags="butler ai assistant on-device llm">
                <div><a class="article-title" href="https://docs.circleos.co.za/user/features/butler">Getting started with Butler AI</a><div class="article-cat">Features</div></div>
                <span style="color:var(--muted);font-size:.8rem;">‚Üí</span>
            </div>
            <div class="article" data-tags="bootloop brick restore fix stuck">
                <div><a class="article-title" href="https://docs.circleos.co.za/user/troubleshooting">Troubleshooting ‚Äî stuck on logo, boot loop, ADB issues</a><div class="article-cat">Installation</div></div>
                <span style="color:var(--muted);font-size:.8rem;">‚Üí</span>
            </div>
            <div class="article" data-tags="banking app google play integrity safetynet">
                <div><a class="article-title" href="https://docs.circleos.co.za/user/faq">Will my banking app work on Circle OS?</a><div class="article-cat">FAQ</div></div>
                <span style="color:var(--muted);font-size:.8rem;">‚Üí</span>
            </div>
            <div class="article" data-tags="update ota delta channel stable beta">
                <div><a class="article-title" href="https://docs.circleos.co.za/user/features/compression">How delta OTA updates work</a><div class="article-cat">Updates</div></div>
                <span style="color:var(--muted);font-size:.8rem;">‚Üí</span>
            </div>
        </div>
    </div>

    <!-- Ticket form -->
    <div class="ticket-section" id="ticket">
        <h2>Submit a support ticket</h2>
        <p>Didn't find what you need? We'll reply within 48 hours.</p>
        <form id="ticketForm" onsubmit="submitTicket(event)">
            <div class="form-row">
                <div class="form-group">
                    <label>Your name</label>
                    <input type="text" id="name" required placeholder="Jane Smith"/>
                </div>
                <div class="form-group">
                    <label>Email address</label>
                    <input type="email" id="email" required placeholder="jane@example.com"/>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Category</label>
                    <select id="category">
                        <option value="installation">Installation</option>
                        <option value="wallet">Titanium Wallet</option>
                        <option value="mesh">Mesh Network</option>
                        <option value="butler">Butler AI</option>
                        <option value="updates">Updates / OTA</option>
                        <option value="general">General</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Device model</label>
                    <input type="text" id="device" placeholder="e.g. Samsung Galaxy A52"/>
                </div>
            </div>
            <div class="form-group">
                <label>Subject</label>
                <input type="text" id="subject" required placeholder="Brief description of your issue"/>
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea id="body" rows="5" required placeholder="Describe the problem in detail. Include error messages, steps to reproduce, and what you've already tried."></textarea>
            </div>
            <button type="submit" class="btn-primary" id="submitBtn">Submit ticket</button>
        </form>
        <div id="success">
            <strong>Ticket submitted!</strong> Your reference number: <strong id="ticketRef"></strong><br/>
            We'll reply to your email within 48 hours. Check our <a href="https://docs.circleos.co.za/user/troubleshooting">troubleshooting guide</a> in the meantime.
        </div>
    </div>
</div>

<footer>
    Circle OS is open source ‚Äî Apache 2.0 ¬∑ <a href="https://circleos.co.za">circleos.co.za</a> ¬∑ <a href="https://github.com/bhengubv/CircleOS">GitHub</a> ¬∑ <a href="https://discord.gg/circleos">Discord</a>
</footer>

<script>
function filterArticles(q) {
    const rows = document.querySelectorAll('.article');
    q = q.toLowerCase().trim();
    rows.forEach(r => {
        const tags = r.dataset.tags || '';
        const title = r.querySelector('.article-title').textContent.toLowerCase();
        r.style.display = (!q || title.includes(q) || tags.includes(q)) ? '' : 'none';
    });
}

function scrollTo(id) {
    document.getElementById('articles').scrollIntoView({behavior:'smooth'});
}

async function submitTicket(e) {
    e.preventDefault();
    const btn = document.getElementById('submitBtn');
    btn.disabled = true; btn.textContent = 'Submitting‚Ä¶';
    const payload = {
        email: document.getElementById('email').value,
        name: document.getElementById('name').value,
        subject: document.getElementById('subject').value,
        body: document.getElementById('body').value,
        category: document.getElementById('category').value,
        device_model: document.getElementById('device').value || null,
        os_version: null
    };
    try {
        const res = await fetch('https://api.slepton.co.za/api/circle/support/tickets', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify(payload)
        });
        const data = await res.json();
        if (res.ok) {
            document.getElementById('ticketForm').style.display = 'none';
            document.getElementById('ticketRef').textContent = data.ticket_ref;
            document.getElementById('success').style.display = 'block';
        } else {
            btn.disabled = false; btn.textContent = 'Submit ticket';
            alert('Submission failed: ' + (data.error || 'Unknown error'));
        }
    } catch {
        btn.disabled = false; btn.textContent = 'Submit ticket';
        alert('Network error ‚Äî please try again or email support@thegeek.co.za');
    }
}
</script>
</body>
</html>
